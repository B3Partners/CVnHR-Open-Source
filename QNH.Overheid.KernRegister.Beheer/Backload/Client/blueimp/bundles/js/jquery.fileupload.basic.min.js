(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var l=0,a=Array.prototype.slice;b.cleanData=function(a){return function(c){var f,e,g;for(g=0;null!=(e=c[g]);g++)try{(f=b._data(e,"events"))&&f.remove&&b(e).triggerHandler("remove")}catch(h){}a(c)}}(b.cleanData);b.widget=function(a,c,f){var e,g,h,k,m={},n=a.split(".")[0];a=a.split(".")[1];e=n+"-"+a;f||(f=c,c=b.Widget);b.expr[":"][e.toLowerCase()]=function(a){return!!b.data(a,
e)};b[n]=b[n]||{};g=b[n][a];h=b[n][a]=function(a,d){if(!this._createWidget)return new h(a,d);arguments.length&&this._createWidget(a,d)};b.extend(h,g,{version:f.version,_proto:b.extend({},f),_childConstructors:[]});k=new c;k.options=b.widget.extend({},k.options);b.each(f,function(a,d){b.isFunction(d)?m[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},f=function(d){return c.prototype[a].apply(this,d)};return function(){var a=this._super,c=this._superApply,e;this._super=b;
this._superApply=f;e=d.apply(this,arguments);this._super=a;this._superApply=c;return e}}():m[a]=d});h.prototype=b.widget.extend(k,{widgetEventPrefix:g?k.widgetEventPrefix||a:a},m,{constructor:h,namespace:n,widgetName:a,widgetFullName:e});g?(b.each(g._childConstructors,function(a,d){var c=d.prototype;b.widget(c.namespace+"."+c.widgetName,h,d._proto)}),delete g._childConstructors):c._childConstructors.push(h);b.widget.bridge(a,h);return h};b.widget.extend=function(d){for(var c=a.call(arguments,1),f=
0,e=c.length,g,h;f<e;f++)for(g in c[f])h=c[f][g],c[f].hasOwnProperty(g)&&void 0!==h&&(b.isPlainObject(h)?d[g]=b.isPlainObject(d[g])?b.widget.extend({},d[g],h):b.widget.extend({},h):d[g]=h);return d};b.widget.bridge=function(d,c){var f=c.prototype.widgetFullName||d;b.fn[d]=function(e){var g="string"===typeof e,h=a.call(arguments,1),k=this;g?this.each(function(){var a,c=b.data(this,f);if("instance"===e)return k=c,!1;if(!c)return b.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+
e+"'");if(!b.isFunction(c[e])||"_"===e.charAt(0))return b.error("no such method '"+e+"' for "+d+" widget instance");a=c[e].apply(c,h);if(a!==c&&void 0!==a)return k=a&&a.jquery?k.pushStack(a.get()):a,!1}):(h.length&&(e=b.widget.extend.apply(null,[e].concat(h))),this.each(function(){var a=b.data(this,f);a?(a.option(e||{}),a._init&&a._init()):b.data(this,f,new c(e,this))}));return k}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(a,c){c=b(c||this.defaultElement||this)[0];this.element=b(c);this.uuid=l++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=b();this.hoverable=b();this.focusable=b();c!==this&&(b.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=b(c.style?c.ownerDocument:c.document||c),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this.options=
b.widget.extend({},this.options,this._getCreateOptions(),a);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(a,c){var f=a,e,g,h;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof a)if(f={},e=a.split("."),a=e.shift(),e.length){g=f[a]=b.widget.extend({},this.options[a]);for(h=0;h<e.length-1;h++)g[e[h]]=g[e[h]]||{},g=g[e[h]];a=e.pop();if(1===arguments.length)return void 0===
g[a]?null:g[a];g[a]=c}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];f[a]=c}this._setOptions(f);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(a,c,f){var e,g=this;"boolean"!==typeof a&&(f=c,c=a,a=!1);f?(c=e=b(c),this.bindings=this.bindings.add(c)):(f=c,c=this.element,e=this.widget());b.each(f,function(f,k){function m(){if(a||!0!==g.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof k?g[k]:k).apply(g,arguments)}"string"!==typeof k&&(m.guid=k.guid=k.guid||m.guid||b.guid++);var n=f.match(/^([\w:-]*)\s*(.*)$/),u=n[1]+g.eventNamespace;(n=n[2])?
e.delegate(n,u,m):c.bind(u,m)})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c);this.bindings=b(this.bindings.not(a).get());this.focusable=b(this.focusable.not(a).get());this.hoverable=b(this.hoverable.not(a).get())},_delay:function(a,c){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},c||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},
mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,f){var e,g=this.options[a];f=f||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(e in a)e in c||
(c[e]=a[e]);this.element.trigger(c,f);return!(b.isFunction(g)&&!1===g.apply(this.element[0],[c].concat(f))||c.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(f,e,g){"string"===typeof e&&(e={effect:e});var h,k=e?!0===e||"number"===typeof e?c:e.effect||c:a;e=e||{};"number"===typeof e&&(e={duration:e});h=!b.isEmptyObject(e);e.complete=g;e.delay&&f.delay(e.delay);if(h&&b.effects&&b.effects.effect[k])f[a](e);else if(k!==a&&f[k])f[k](e.duration,
e.easing,g);else f.queue(function(c){b(this)[a]();g&&g.call(f[0]);c()})}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){var l=0;b.ajaxTransport("iframe",function(a){if(a.async){var d=a.initialIframeSrc||"javascript:false;",c,f,e;return{send:function(g,h){c=b('<form style="display:none;"></form>');c.attr("accept-charset",a.formAcceptCharset);e=/\?/.test(a.url)?"&":"?";"DELETE"===a.type?(a.url=a.url+e+"_method=DELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+e+"_method=PUT",
a.type="POST"):"PATCH"===a.type&&(a.url=a.url+e+"_method=PATCH",a.type="POST");l+=1;f=b('<iframe src="'+d+'" name="iframe-transport-'+l+'"></iframe>').bind("load",function(){var e,g=b.isArray(a.paramName)?a.paramName:[a.paramName];f.unbind("load").bind("load",function(){var a;try{if(a=f.contents(),!a.length||!a[0].firstChild)throw Error();}catch(e){a=void 0}h(200,"success",{iframe:a});b('<iframe src="'+d+'"></iframe>').appendTo(c);window.setTimeout(function(){c.remove()},0)});c.prop("target",f.prop("name")).prop("action",
a.url).prop("method",a.type);a.formData&&b.each(a.formData,function(a,d){b('<input type="hidden"/>').prop("name",d.name).val(d.value).appendTo(c)});a.fileInput&&a.fileInput.length&&"POST"===a.type&&(e=a.fileInput.clone(),a.fileInput.after(function(a){return e[a]}),a.paramName&&a.fileInput.each(function(c){b(this).prop("name",g[c]||a.paramName)}),c.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),a.fileInput.removeAttr("form"));c.submit();e&&e.length&&
a.fileInput.each(function(a,c){var d=b(e[a]);b(c).prop("name",d.prop("name")).attr("form",d.attr("form"));d.replaceWith(c)})});c.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src",d);c&&c.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(a){return a&&b(a[0].body).text()},"iframe json":function(a){return a&&b.parseJSON(b(a[0].body).text())},"iframe html":function(a){return a&&b(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&b.isXMLDoc(a)?
a:b.parseXML(a.XMLDocument&&a.XMLDocument.xml||b(a.body).html())},"iframe script":function(a){return a&&b.globalEval(b(a[0].body).text())}}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],b):"object"===typeof exports?b(require("jquery"),require("./vendor/jquery.ui.widget")):b(window.jQuery)})(function(b){function l(a){var d="dragover"===a;return function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var f=c.dataTransfer;f&&-1!==b.inArray("Files",f.types)&&!1!==this._trigger(a,b.Event(a,{delegatedEvent:c}))&&(c.preventDefault(),d&&(f.dropEffect="copy"))}}b.support.fileInput=!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||
b('<input type="file">').prop("disabled"));b.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,
sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(a,d){a=this.messages[a]||a.toString();d&&b.each(d,function(c,b){a=a.replace("{"+c+"}",b)});return a},formData:function(a){return a.serializeArray()},add:function(a,
d){if(a.isDefaultPrevented())return!1;(d.autoUpload||!1!==d.autoUpload&&b(this).fileupload("option","autoUpload"))&&d.process().done(function(){d.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=
this.loaded=0;this.getBitrate=function(a,b,c){var f=a-this.timestamp;if(!this.bitrate||!c||f>c)this.bitrate=1E3/f*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&b.support.xhrFileUpload||b.support.xhrFormDataFileUpload)},_getFormData:function(a){var d;return"function"===b.type(a.formData)?a.formData(a.form):b.isArray(a.formData)?a.formData:"object"===b.type(a.formData)?(d=[],b.each(a.formData,function(a,
b){d.push({name:a,value:b})}),d):[]},_getTotal:function(a){var d=0;b.each(a,function(a,b){d+=b.size||1});return d},_initProgressObject:function(a){var d={loaded:0,total:0,bitrate:0};a._progress?b.extend(a._progress,d):a._progress=d},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(a,d){if(a.lengthComputable){var c=Date.now?Date.now():(new Date).getTime(),f;d._time&&d.progressInterval&&
c-d._time<d.progressInterval&&a.loaded!==a.total||(d._time=c,f=Math.floor(a.loaded/a.total*(d.chunkSize||d._progress.total))+(d.uploadedBytes||0),this._progress.loaded+=f-d._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,d.bitrateInterval),d._progress.loaded=d.loaded=f,d._progress.bitrate=d.bitrate=d._bitrateTimer.getBitrate(c,f,d.bitrateInterval),this._trigger("progress",b.Event("progress",{delegatedEvent:a}),d),this._trigger("progressall",b.Event("progressall",
{delegatedEvent:a}),this._progress))}},_initProgressListener:function(a){var d=this,c=a.xhr?a.xhr():b.ajaxSettings.xhr();c.upload&&(b(c.upload).bind("progress",function(c){var b=c.originalEvent;c.lengthComputable=b.lengthComputable;c.loaded=b.loaded;c.total=b.total;d._onProgress(c,a)}),a.xhr=function(){return c})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var d=this,c,f=a.files[0],e=a.multipart||!b.support.xhrFileUpload,g="array"===
b.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=b.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",f)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"');e?b.support.xhrFormDataFileUpload&&(a.postMessage?(c=this._getFormData(a),a.blob?c.push({name:g,value:a.blob}):b.each(a.files,function(d,f){c.push({name:"array"===b.type(a.paramName)&&a.paramName[d]||g,value:f})})):(d._isInstanceOf("FormData",
a.formData)?c=a.formData:(c=new FormData,b.each(this._getFormData(a),function(a,b){c.append(b.name,b.value)})),a.blob?c.append(g,a.blob,f.name):b.each(a.files,function(f,e){(d._isInstanceOf("File",e)||d._isInstanceOf("Blob",e))&&c.append("array"===b.type(a.paramName)&&a.paramName[f]||g,e,e.uploadName||e.name)})),a.data=c):(a.contentType=f.type||"application/octet-stream",a.data=a.blob||f);a.blob=null},_initIframeSettings:function(a){var d=b("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+
(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&d&&d!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var d=b(a.fileInput),c=a.paramName;c?b.isArray(c)||(c=[c]):(c=[],d.each(function(){for(var a=
b(this),d=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)c.push(d),--a}),c.length||(c=[d.prop("name")||"files[]"]));return c},_initFormSettings:function(a){a.form&&a.form.length||(a.form=b(a.fileInput.prop("form")),a.form.length||(a.form=b(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===b.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==
a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=b.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,d,c){var f=b.Deferred(),e=f.promise();
d=d||this.options.context||e;!0===a?f.resolveWith(d,c):!1===a&&f.rejectWith(d,c);e.abort=f.promise;return this._enhancePromise(e)},_addConvenienceMethods:function(a,d){var c=this,f=function(a){return b.Deferred().resolveWith(c,a).promise()};d.process=function(a,g){if(a||g)d._processQueue=this._processQueue=(this._processQueue||f([this])).then(function(){return d.errorThrown?b.Deferred().rejectWith(c,[d]).promise():f(arguments)}).then(a,g);return this._processQueue||f([this])};d.submit=function(){"pending"!==
this.state()&&(d.jqXHR=this.jqXHR=!1!==c._trigger("submit",b.Event("submit",{delegatedEvent:a}),this)&&c._onSend(a,this));return this.jqXHR||c._getXHRPromise()};d.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";c._trigger("fail",null,this);return c._getXHRPromise(!1)};d.state=function(){if(this.jqXHR)return c._getDeferredState(this.jqXHR);if(this._processQueue)return c._getDeferredState(this._processQueue)};d.processing=function(){return!this.jqXHR&&this._processQueue&&
"pending"===c._getDeferredState(this._processQueue)};d.progress=function(){return this._progress};d.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,d){a.uploadedBytes=a.uploadedBytes||0;var c=this,f=a.files[0],e=f.size,g=a.uploadedBytes,h=a.maxChunkSize||e,k=this._blobSlice,m=b.Deferred(),n=m.promise(),l,p;if(!(this._isXHRUpload(a)&&k&&(g||h<e))||a.data)return!1;
if(d)return!0;if(g>=e)return f.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",f.error]);p=function(){var d=b.extend({},a),n=d._progress.loaded;d.blob=k.call(f,g,g+h,f.type);d.chunkSize=d.blob.size;d.contentRange="bytes "+g+"-"+(g+d.chunkSize-1)+"/"+e;c._initXHRData(d);c._initProgressListener(d);l=(!1!==c._trigger("chunksend",null,d)&&b.ajax(d)||c._getXHRPromise(!1,d.context)).done(function(f,h,k){g=c._getUploadedBytes(k)||g+d.chunkSize;n+d.chunkSize-d._progress.loaded&&
c._onProgress(b.Event("progress",{lengthComputable:!0,loaded:g-d.uploadedBytes,total:g-d.uploadedBytes}),d);a.uploadedBytes=d.uploadedBytes=g;d.result=f;d.textStatus=h;d.jqXHR=k;c._trigger("chunkdone",null,d);c._trigger("chunkalways",null,d);g<e?p():m.resolveWith(d.context,[f,h,k])}).fail(function(a,b,f){d.jqXHR=a;d.textStatus=b;d.errorThrown=f;c._trigger("chunkfail",null,d);c._trigger("chunkalways",null,d);m.rejectWith(d.context,[a,b,f])})};this._enhancePromise(n);n.abort=function(){return l.abort()};
p();return n},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,d,c,f){var e=f._progress.total,
g=f._response;f._progress.loaded<e&&this._onProgress(b.Event("progress",{lengthComputable:!0,loaded:e,total:e}),f);g.result=f.result=a;g.textStatus=f.textStatus=d;g.jqXHR=f.jqXHR=c;this._trigger("done",null,f)},_onFail:function(a,b,c,f){var e=f._response;f.recalculateProgress&&(this._progress.loaded-=f._progress.loaded,this._progress.total-=f._progress.total);e.jqXHR=f.jqXHR=a;e.textStatus=f.textStatus=b;e.errorThrown=f.errorThrown=c;this._trigger("fail",null,f)},_onAlways:function(a,b,c,f){this._trigger("always",
null,f)},_onSend:function(a,d){d.submit||this._addConvenienceMethods(a,d);var c=this,f,e,g,h,k=c._getAJAXSettings(d),m=function(){c._sending+=1;k._bitrateTimer=new c._BitrateTimer;return f=f||((e||!1===c._trigger("send",b.Event("send",{delegatedEvent:a}),k))&&c._getXHRPromise(!1,k.context,e)||c._chunkedUpload(k)||b.ajax(k)).done(function(a,b,d){c._onDone(a,b,d,k)}).fail(function(a,b,d){c._onFail(a,b,d,k)}).always(function(a,b,d){c._onAlways(a,b,d,k);--c._sending;--c._active;if(k.limitConcurrentUploads&&
k.limitConcurrentUploads>c._sending)for(a=c._slots.shift();a;){if("pending"===c._getDeferredState(a)){a.resolve();break}a=c._slots.shift()}0===c._active&&c._trigger("stop")})};this._beforeSend(a,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(g=b.Deferred(),this._slots.push(g),h=g.then(m)):h=this._sequence=this._sequence.then(m,m),h.abort=function(){e=[void 0,"abort","abort"];
return f?f.abort():(g&&g.rejectWith(k.context,e),m())},this._enhancePromise(h)):m()},_onAdd:function(a,d){var c=this,f=!0,e=b.extend({},this.options,d),g=d.files,h=g.length,k=e.limitMultiFileUploads,m=e.limitMultiFileUploadSize,n=e.limitMultiFileUploadSizeOverhead,l=0,p=this._getParamName(e),q,r,t=0;if(!h)return!1;m&&void 0===g[0].size&&(m=void 0);if((e.singleFileUploads||k||m)&&this._isXHRUpload(e))if(e.singleFileUploads||m||!k)if(!e.singleFileUploads&&m)for(r=[],q=[],e=0;e<h;e+=1){if(l+=g[e].size+
n,e+1===h||l+g[e+1].size+n>m||k&&e+1-t>=k)r.push(g.slice(t,e+1)),l=p.slice(t,e+1),l.length||(l=p),q.push(l),t=e+1,l=0}else q=p;else for(r=[],q=[],e=0;e<h;e+=k)r.push(g.slice(e,e+k)),l=p.slice(e,e+k),l.length||(l=p),q.push(l);else r=[g],q=[p];d.originalFiles=g;b.each(r||g,function(e,g){var h=b.extend({},d);h.files=r?g:[g];h.paramName=q[e];c._initResponseObject(h);c._initProgressObject(h);c._addConvenienceMethods(a,h);return f=c._trigger("add",b.Event("add",{delegatedEvent:a}),h)});return f},_replaceFileInput:function(a){var d=
a.fileInput,c=d.clone(!0),f=d.is(document.activeElement);a.fileInputClone=c;b("<form></form>").append(c)[0].reset();d.after(c).detach();f&&c.focus();b.cleanData(d.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,b){return b===d[0]?c[0]:b});d[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(a,d){var c=this,f=b.Deferred(),e=function(b){b&&!b.entry&&(b.entry=a);f.resolve([b])},g=function(b){c._handleFileTreeEntries(b,d+a.name+"/").done(function(a){f.resolve(a)}).fail(e)},
h=function(){k.readEntries(function(a){a.length?(l=l.concat(a),h()):g(l)},e)},k,l=[];d=d||"";a.isFile?a._file?(a._file.relativePath=d,f.resolve(a._file)):a.file(function(a){a.relativePath=d;f.resolve(a)},e):a.isDirectory?(k=a.createReader(),h()):f.resolve([]);return f.promise()},_handleFileTreeEntries:function(a,d){var c=this;return b.when.apply(b,b.map(a,function(a){return c._handleFileTreeEntry(a,d)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=
a||{};var d=a.items;return d&&d.length&&(d[0].webkitGetAsEntry||d[0].getAsEntry)?this._handleFileTreeEntries(b.map(d,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):b.Deferred().resolve(b.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=b(a);var d=a.prop("webkitEntries")||a.prop("entries");if(d&&d.length)return this._handleFileTreeEntries(d);d=b.makeArray(a.prop("files"));if(d.length)void 0===d[0].name&&
d[0].fileName&&b.each(d,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return b.Deferred().resolve([]).promise();d=[{name:a.replace(/^.*\\/,"")}]}return b.Deferred().resolve(d).promise()},_getFileInputFiles:function(a){return a instanceof b&&1!==a.length?b.when.apply(b,b.map(a,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var d=this,c={fileInput:b(a.target),
form:b(a.target.form)};this._getFileInputFiles(c.fileInput).always(function(f){c.files=f;d.options.replaceFileInput&&d._replaceFileInput(c);!1!==d._trigger("change",b.Event("change",{delegatedEvent:a}),c)&&d._onAdd(a,c)})},_onPaste:function(a){var d=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,c={files:[]};d&&d.length&&(b.each(d,function(a,b){var d=b.getAsFile&&b.getAsFile();d&&c.files.push(d)}),!1!==this._trigger("paste",b.Event("paste",{delegatedEvent:a}),
c)&&this._onAdd(a,c))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var d=this,c=a.dataTransfer,f={};c&&c.files&&c.files.length&&(a.preventDefault(),this._getDroppedFiles(c).always(function(c){f.files=c;!1!==d._trigger("drop",b.Event("drop",{delegatedEvent:a}),f)&&d._onAdd(a,f)}))},_onDragOver:l("dragover"),_onDragEnter:l("dragenter"),_onDragLeave:l("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,
drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));b.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(a,d){var c=-1!==b.inArray(a,this._specialOptions);c&&this._destroyEventHandlers();
this._super(a,d);c&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof b||(a.fileInput=b(a.fileInput));a.dropZone instanceof b||(a.dropZone=b(a.dropZone));a.pasteZone instanceof b||(a.pasteZone=b(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),
b)},_isRegExpOption:function(a,d){return"url"!==a&&"string"===b.type(d)&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var a=this,d=this.options,c=this.element.data();b.each(this.element[0].attributes,function(b,e){var g=e.name.toLowerCase(),h;/^data-/.test(g)&&(g=g.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),h=c[g],a._isRegExpOption(g,h)&&(h=a._getRegExp(h)),d[g]=h)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=
[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var d=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(b){a.files=b;d._onAdd(null,a)}):(a.files=b.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var d=
this,c=b.Deferred(),f=c.promise(),e,g;f.abort=function(){g=!0;if(e)return e.abort();c.reject(null,"abort","abort");return f};this._getFileInputFiles(a.fileInput).always(function(b){g||(b.length?(a.files=b,e=d._onSend(null,a),e.then(function(a,b,d){c.resolve(a,b,d)},function(a,b,d){c.reject(a,b,d)})):c.reject())});return this._enhancePromise(f)}a.files=b.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","../jquery.fileupload"],b):"object"===typeof exports?b(require("jquery"),require("../jquery.fileupload")):b(window.jQuery)})(function(b){b.widget("blueimp.fileupload",b.blueimp.fileupload,{getUploadButton:function(){return b("<button/>").addClass("btn").prop("disabled",!0).text("Processing...").on("click",function(){var l=b(this),a=l.data();l.off("click").text("Abort").on("click",function(){l.remove();a.abort()});a.submit().always(function(){l.remove()})})},
initTheme:function(b){var a=this.element;b=b.toLowerCase();return a?("basic"==b?this._initBasicTheme(a):"basicplus"==b?this._initBasicPlusTheme(a):"basicplusui"!=b&&"jqueryui"!=b||this._initBasicPlusUITheme(a),a):null},_initBasicTheme:function(l){l.on("fileuploaddone",function(a,d){b.each(d.result.files,function(a,d){b("<p/>").text(d.name).appendTo("#files")})}).on("fileuploadprogressall",function(a,d){var c=parseInt(d.loaded/d.total*100,10);b("#progress .progress-bar").css("width",c+"%")}).prop("disabled",
!b.support.fileInput).parent().addClass(b.support.fileInput?void 0:"disabled")},_initBasicPlusTheme:function(l){l.on("fileuploadadd",function(a,d){var c=b(a.target).data("blueimp-fileupload").getUploadButton();d.context=b("<div/>").appendTo("#files");b.each(d.files,function(a,e){var g=b("<p/>").append(b("<span/>").text(e.name));a||g.append("<br>").append(c.clone(!0).data(d));g.appendTo(d.context)})}).on("fileuploadprocessalways",function(a,d){var c=d.index,f=d.files[c],e=b(d.context.children()[c]);
f.preview&&e.prepend("<br>").prepend(f.preview);f.error&&e.append("<br>").append(f.error);c+1===d.files.length&&d.context.find("button").text("Upload").prop("disabled",!!d.files.error)}).on("fileuploadprogressall",function(a,d){var c=parseInt(d.loaded/d.total*100,10);b("#progress .bar").css("width",c+"%")}).on("fileuploaddone",function(a,d){b.each(d.result.files,function(a,f){var e=b("<a>").attr("target","_blank").prop("href",f.url);b(d.context.children()[a]).wrap(e)})}).on("fileuploadfail",function(a,
d){b.each(d.result.files,function(a,f){var e=b("<span/>").text(f.error);b(d.context.children()[a]).append("<br>").append(e)})}).prop("disabled",!b.support.fileInput).parent().addClass(b.support.fileInput?void 0:"disabled")},_initBasicPlusUITheme:function(l){l.prop("disabled",!b.support.fileInput).parent().addClass(b.support.fileInput?void 0:"disabled")}})});